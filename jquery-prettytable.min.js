!function(a){"use strict";function b(b){if("string"!=typeof b)return b=e(b)?b:{},this.each(function(){a(this).data("prettyTable")||(a(this).toggleClass("prettytable",!0),a(this).data("prettyTable",new j(this,b)))});var d=this[0],f=a(d).data("prettyTable");if(!f)return"Not initialized.";if("instance"===b)return f;if(!/^\-.*/.test(b))try{return f[b].apply(f,c.call(arguments,1))}catch(g){}}var c=Array.prototype.slice,d=Object.prototype.toString,e=function(a){return!!a&&"object"==typeof a&&"[object Object]"===d.call(a)},f=function(a){return!!a&&"[object Function]"===d.call(a)},g=function(b,c){var d=c||"12px arial",e=a("<div>"+b+"</div>").css({position:"absolute","float":"left","white-space":"nowrap",visibility:"hidden",font:d}).appendTo(a("body")),f=e.width();return e.remove(),f},h=function(a){for(var b=0,c=a.length,d=-1,e=0;c>e;e++)d=a.charCodeAt(e),b+=d>=0&&128>=d?1:2;return b},i=String.prototype.trim?function(a){return a?a.trim():""}:function(a){return a?a.replace(/(^\s+)|(\s+$)/g,""):""},j=function(b,c){var d=(this.el=b,this.$el=a(b)),e=d.data("scroller")||!1;this.options=a.extend({scroller:e,fixedPadding:20,iconWidth:20,maxColumnWidth:function(b,c){var d=c,e=a(b),f=this.iconWidth;return e.find(".iconfont")[0]&&(d+=f),e.find(".filter:visible")[0]&&(d+=f),e.find(".sorter:visible")[0]&&(d+=f),d},metaColumnWidth:function(b){var c=a(b).data("width");return a.isNumeric(c)?parseInt(c):!1},setColumnWidth:function(b,c,d){var e=c,f=d,g=(!!this.scroller,a(b)),h="flex"===g.data("width"),i=a.isNumeric(g.data("fixed-width"))?parseInt(g.data("fixed-width")):!1;h||(a.isNumeric(f)&&(f+=this.fixedPadding,e=Math.min(e,f)),i&&(e=i),g.css("width",e+"px"))}},c),this.init()};j.prototype.init=function(){this._adjustColumnWidth()},j.prototype.refresh=function(){this._adjustColumnWidth()},j.prototype.lock=function(){this.options.scroller&&this.$el.closest(".prettytable-scroll-container").off("mousewheel.pt").on("mousewheel.pt",function(){return!1}).end().trigger("lock.pt")},j.prototype.unlock=function(){this.options.scroller&&this.$el.closest(".prettytable-scroll-container").off("mousewheel.pt").end().trigger("unlock.pt")},j.prototype._adjustColumnWidth=function(){var b=this.options,c=b.fixedPadding,d=(b.iconWidth,!!b.scroller,this.$el),e=d.find("thead > tr:first"),j=d.parent(),k=j.outerWidth(),l=d.parent().css("overflow"),m=d.css("font"),n=d.find("thead > tr:first > th").size();b.scroller&&"hidden"!=l&&j.css("overflow","hidden");for(var o=function(j){var k,l,n,o=d.find("tbody:visible tr td:nth-child("+(j+1)+")"),p="";o.each(function(b,c){var d=i(a(c).text())||"";p=h(d)>h(i(p))?d:p}),n=e.find("th").eq(j),h(i(n.text()))>h(p)&&(p=i(n.text())),k=g(p,m)+c,k=f(b.maxColumnWidth)?b.maxColumnWidth(n[0],k):k,l=f(b.metaColumnWidth)?b.metaColumnWidth(n[0]):!1,b.setColumnWidth(n[0],k,l)},p=0;n>p;p++)o(p);b.scroller&&_.delay(function(){var a;a=d.outerWidth(),a>k&&(d.css("width",a+"px"),d.toggleClass("table-scrollable",!0),d.parent().is(":not(.prettytable-scroll-container)")&&d.wrap('<div class="prettytable-scroll-container"></div>')),_.delay(function(){var b;a=d.outerWidth(),b=d.parent().width(),b>a&&d.css("width","100%")},20),j.css("overflow",l)},20)};var k=a.fn.prettyTable;a.fn.prettyTable=b,a.fn.prettyTable.Constructor=j,a.PrettyTable={textWidth:g,textLength:h},a.fn.prettyTable.noConflict=function(){return a.fn.prettyTable=k,this}}(jQuery);